#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>          /* See NOTES */
#include <unistd.h>
       #include <sys/socket.h>
       #include <errno.h>
       #include <arpa/inet.h>
       #include <string.h>


int main(int argc, char **argv)
{
	sleep(32);
	int sd;
	unsigned char buf[102] = {0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
				  0x14, 0xFE, 0xB5, 0xEC, 0x50, 0x5C,
				  0x14, 0xFE, 0xB5, 0xEC, 0x50, 0x5C,
				  0x14, 0xFE, 0xB5, 0xEC, 0x50, 0x5C,
				  0x14, 0xFE, 0xB5, 0xEC, 0x50, 0x5C,
				  0x14, 0xFE, 0xB5, 0xEC, 0x50, 0x5C,
				  0x14, 0xFE, 0xB5, 0xEC, 0x50, 0x5C,
				  0x14, 0xFE, 0xB5, 0xEC, 0x50, 0x5C,
				  0x14, 0xFE, 0xB5, 0xEC, 0x50, 0x5C,
				  0x14, 0xFE, 0xB5, 0xEC, 0x50, 0x5C,
				  0x14, 0xFE, 0xB5, 0xEC, 0x50, 0x5C,
				  0x14, 0xFE, 0xB5, 0xEC, 0x50, 0x5C,
				  0x14, 0xFE, 0xB5, 0xEC, 0x50, 0x5C,
				  0x14, 0xFE, 0xB5, 0xEC, 0x50, 0x5C,
				  0x14, 0xFE, 0xB5, 0xEC, 0x50, 0x5C,
				  0x14, 0xFE, 0xB5, 0xEC, 0x50, 0x5C,
				  0x14, 0xFE, 0xB5, 0xEC, 0x50, 0x5C
				  //0x18, 0x03, 0x73, 0x57, 0x32, 0xc3,
				  //0x18, 0x03, 0x73, 0x57, 0x32, 0xc3,
				  //0x18, 0x03, 0x73, 0x57, 0x32, 0xc3,
				  //0x18, 0x03, 0x73, 0x57, 0x32, 0xc3,
				  //0x18, 0x03, 0x73, 0x57, 0x32, 0xc3,
				  //0x18, 0x03, 0x73, 0x57, 0x32, 0xc3,
				  //0x18, 0x03, 0x73, 0x57, 0x32, 0xc3,
				  //0x18, 0x03, 0x73, 0x57, 0x32, 0xc3,
				  //0x18, 0x03, 0x73, 0x57, 0x32, 0xc3,
				  //0x18, 0x03, 0x73, 0x57, 0x32, 0xc3,
				  //0x18, 0x03, 0x73, 0x57, 0x32, 0xc3,
				  //0x18, 0x03, 0x73, 0x57, 0x32, 0xc3,
				  //0x18, 0x03, 0x73, 0x57, 0x32, 0xc3,
				  //0x18, 0x03, 0x73, 0x57, 0x32, 0xc3,
				  //0x18, 0x03, 0x73, 0x57, 0x32, 0xc3,
				  //0x18, 0x03, 0x73, 0x57, 0x32, 0xc3
				  };
	struct sockaddr_in raddr;
	

	sd = socket(AF_INET, SOCK_DGRAM, 0);
	if(sd < 0) {
		 perror("socket:");
		 exit(-1);
	}
	int val = 1;
	if(setsockopt(sd, SOL_SOCKET, SO_BROADCAST, &val, sizeof(val)) < 0) {
		 perror("setsockopt()");
		 exit(-1);
	}

	//18:03:73:57:32:ce 
	//memset(&buf+12, '\0', sizeof(buf)-12);
	printf("aaa %d\n", sizeof(buf));

	raddr.sin_family = AF_INET;
	raddr.sin_port = htons(2034);
	inet_pton(AF_INET, "255.255.255.255", &raddr.sin_addr);
	if(sendto(sd, &buf, 102, 0, (void *)&raddr, sizeof(raddr)) < 0) {
		 perror("sendto");
		 exit(-1);
	}

	puts("ok!");
	close(sd);

	exit(0);
}
